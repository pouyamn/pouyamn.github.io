<!DOCTYPE html>
<html lang="en">
<head>
        <title>QWEB demystification, Part 1 - t-field and t-esc</title>
        <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="http://pouyamn.github.io/theme/images/favicon.ico"/>
        <link rel="stylesheet" href="http://pouyamn.github.io/theme/css/main.css" type="text/css" />
        <link href="http://pouyamn.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Odoo Demystification Atom Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://pouyamn.github.io/css/ie.css"/>
                <script src="http://pouyamn.github.io/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://pouyamn.github.io/css/ie6.css"/><![endif]-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>


</head>

<body id="index" class="home">
	
  <!-- <header id="banner" class="body"> -->
  <!--               <h1><a href="http://pouyamn.github.io/"><img src="http://www.launchyard.com/images/logo.png" /></a></h1> -->
  <!--       </header> --> 

  <div class="LaunchyardDetail">
    <!-- <p> -->
    <!-- <img src="http://pouyamn.github.io/theme/images/blue-pin.png" width="100" height="100" alt="Graph icon"> -->
    <!-- </p> -->
    <p><a id="sitesubtitle" href="http://pouyamn.github.io/"></a></p>
    <p><a id="aboutlink" href="http://pouyamn.github.io/pages/about.html">about</a></p>

    <!-- <ul> -->
    <!--   <li><a href="http://pouyamn.github.io/pages/about.html">about</a></li> -->
      <!-- <li><a href="http://pouyamn.github.io/pages/about.html">articles</a></li> -->
<!--  -->
<!--         <br/> -->
<!--         <br/> -->
<!--      -->        
<!--       <li><a href="">Would you like 'like' and 'ilike' in your *domain* and *attr*?</a></li> -->
<!--      -->        
<!--       <li><a href="">QWEB demystification, Part 1 - t-field and t-esc</a></li> -->
<!--      -->        
<!--       <li><a href="">QWEB demystification, Part 2 - qweb widgits</a></li> -->
<!--      -->        
<!--       <li><a href="">QWEB demystification, Part 3 - dynamic views in QWEB</a></li> -->
<!--      -->        
<!--       <li><a href="">Keep Odoo running, easily</a></li> -->
<!--      -->        
<!--       <li><a href="">Seting Up this blog with Pelican</a></li> -->
<!--      -->
<!--  -->
    <!-- </ul> -->

    <!-- This belongs in the about page -->
      <!--  -->
      <!-- <a href="https://github.com/pouyamn/">My github page</a> -->
      <!-- <br/> -->
      <!--  -->
      <!-- <a href="https://tr.linkedin.com/in/pouyamn">My linked-in profile</a> -->
      <!-- <br/> -->
      <!--  -->

<!-- <ul>
	<li><a href="http://pouyamn.github.io/category/odoo.html">odoo</a></li>
	<li><a href="http://pouyamn.github.io/category/pelican.html">Pelican</a></li>
	<li><a href="http://pouyamn.github.io/category/views.html">views</a></li>
</ul>
 -->
  </div>

<section id="content" >
    <div class="body">
      <article>
        <header>
          <h1 class="entry-title">
            <a href="http://pouyamn.github.io/posts/2016/01/16/qweb-1/" rel="bookmark"
               title="Permalink to QWEB demystification, Part 1 - t-field and t-esc">QWEB demystification, Part 1 - t-field and t-esc</a></h1>
		<!-- Place this tag where you want the +1 button to render. -->
		<div class="g-plusone" data-size="tall"></div>


        </header>

        <div class="entry-content">
<div class="post-info">
	<ul>
        <li class="vcard author">
                 by&nbsp;<a class="url fn" href="http://pouyamn.github.io/author/pouya-mn.html">Pouya MN</a>
        </li>
        <li class="published" title="2016-01-16T11:26:00">
          on&nbsp;Sat 16 January 2016
        </li>

	</ul>
<p>Category: <a href="http://pouyamn.github.io/tag/qweb.html">QWEB</a><a href="http://pouyamn.github.io/tag/safe-eval.html">safe-eval</a><a href="http://pouyamn.github.io/tag/openerp.html">openerp</a><a href="http://pouyamn.github.io/tag/odoo.html">odoo</a><a href="http://pouyamn.github.io/tag/odoo-reports.html">odoo reports</a></p>
</div><!-- /.post-info -->          <p>When I stated to make some QWEB reports, I was wondering why there are both <code>t-field</code> and <code>t-esc</code>? For example both <code>t-esc="partner_id.name"</code> and <code>t-field="partner_id.name"</code> has the exact same output. </p>
<p>I made a thorough study and I'll tell you the results, but first... Let me write about QWEB, the great html templating engine. 
There are some templating language, and some of them are XML-based like Genshi, Thymeleaf or Facelets. But QWEB is exactly designed for Odoo, it has access to the database and python side and context. Other templating engines are more general than QWEB and the can normally access to some kind of context passed in a JSON object only. 
The beauty of QWEB is that it is python integrated, there are not just variables but also you can have some python expressions and also it has customizable widgets. I'll write about widgets and using expressions to change the html dynamically.
Appologies me for talking too much, lets get back to the story, <code>t-esc</code> or <code>t-field</code>. The differences are quite a few, in text fields they are just the same but it is not going on like this with the others. The difference is in the interpreter of them and the widgets.<code>t-esc</code> actually calls a <code>safe-eval</code> most of other 't's do the same but <code>t-field</code> can acept only a field name, or a chain of dot seperated related fields. Also, <code>t-field</code> uses form widgets for rendering the selected field while <code>t-esc</code> only returns a simple python output (we can change this and prettify the otherwise blunt <code>t-esc</code>, I'll talk about it in the following parts). For example if you call t-esc on a related field i.e. <code>t-esc="someMany2Onefield"</code> it will print the python <code>__str__</code> of the class and a record number, just like what you will have if you in python:</p>
<div class="highlight"><pre><span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">someMany2Onefield</span>
</pre></div>


<p><code>&gt;&gt;&gt;someMany2Onefield(12,)</code>
but if you use <code>t-field</code> it will display the <code>display_name</code> field or the <code>name_get</code>. The difference is <code>t-field</code> uses form widget of the field as i said before. The same goes with the numerical fields, <code>t-field</code> will use the <code>digits</code> property of the field for decimal point and it will use thousend separator and other settings from the language settings of Odoo, while <code>t-esc</code> simply print the number without formatting (although one can use python's <code>format</code> function in <code>t-esc</code>).
Other 't' tags also use safe_eval, <code>t-set</code> in <code>t-value</code> part, <code>t-if</code>,  <code>t-foreach</code>, <code>t-att</code> and <code>t-attf</code>, <code>t-raw</code> and <code>t-log</code>.</p>
<h4>What can be used in safe_eval</h4>
<p><code>qweb_context</code> and of course safe python commands! It raises two questions, what are <em>safe</em> python commands and what is in <code>qweb_context</code>?</p>
        </div><!-- /.entry-content -->

<!-- Place this tag after the last +1 button tag. -->
	<script type="text/javascript">
  	(function() {
    	var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    	po.src = 'https://apis.google.com/js/platform.js';
    	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  	})();
	</script>
<!-- google plus comments-->
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function() {
    //$post_title = $('header .entry-title').text();
    //$post_domain = document.domain;
    if( jQuery('article').hasClass('hentry') )
    {
        $post_link = encodeURI(jQuery(location).attr('href'));
        $gp_url = jQuery('.googleplus h1 a').attr('href');
        $google_plus_id = $gp_url.split('/')[3].split('?')[0] ;
        $google_query_url = "https://www.googleapis.com/plus/v1/activities?query=" +
                            $post_link +
                            "&maxResults=20&orderBy=best&fields=id%2Citems(actor(displayName%2Cid%2Curl)" +
                            "%2Cid%2Cobject(attachments(id%2Curl)%2Curl))%2Ctitle&key=AIzaSyD-a9IF8KKYgoC3cpgS-Al7hLQDbugrDcw";
        jQuery.getJSON($google_query_url,
            function(data) {
                jQuery.each(data.items, function(i,item){
                    if(item.actor.id == $google_plus_id)
                    {
                        jQuery('.entry-content').append( "<h3>Comments?</h3><p>Join the discussion at the <a href='" + item.object.url +"'>Google+ post</a></p>");
                        return false;
                    }
                });
            });
    };
});
</script>


	<div id="commentswrap">
	<div id="comments"></div>
	</div>
	
    <script src="https://apis.google.com/js/plusone.js"></script>
    <script>
        $(document).ready(function () {
            gapi.comments.render('comments', {
                href: window.location,
                width: '600',
                first_party_property: 'BLOGGER',
                view_type: 'FILTERED_POSTMOD'
            });
    });
    </script>

      </article>
    </div>
</section>
        <section id="extras" >
        
        </section><!-- /#extras -->
	
        <footer id="contentinfo" >
                <address id="about" class="vcard ">
                Proudly powered by <a href="http://getpelican.com/" target="_blank">Pelican</a>, which takes
                great advantage of <a href="http://python.org" target="_blank">Python</a>.
		
                </address><!-- /#about -->
		

                
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-72349337-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>