<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Odoo Demystification - QWEB</title><link href="https://pouyamn.github.io/" rel="alternate"></link><link href="https://pouyamn.github.io/feeds/qweb.atom.xml" rel="self"></link><id>https://pouyamn.github.io/</id><updated>2016-01-16T11:26:00+03:30</updated><entry><title>QWEB demystification, Part 1 - t-field and t-esc</title><link href="https://pouyamn.github.io/posts/2016/01/16/qweb-1/" rel="alternate"></link><published>2016-01-16T11:26:00+03:30</published><updated>2016-01-16T11:26:00+03:30</updated><author><name>Pouya MN</name></author><id>tag:pouyamn.github.io,2016-01-16:/posts/2016/01/16/qweb-1/</id><summary type="html">&lt;p&gt;the differences bitween t-field and t-esc, where and how to use? What about other 't's?&lt;/p&gt;</summary><content type="html">&lt;p&gt;When I stated to make some QWEB reports, I was wondering why there are both &lt;code&gt;t-field&lt;/code&gt; and &lt;code&gt;t-esc&lt;/code&gt;? For example both &lt;code&gt;t-esc="partner_id.name"&lt;/code&gt; and &lt;code&gt;t-field="partner_id.name"&lt;/code&gt; has the exact same output. &lt;/p&gt;
&lt;p&gt;I made a thorough study and I'll tell you the results, but first... Let me write about QWEB, the great html templating engine. 
There are some templating language, and some of them are XML-based like Genshi, Thymeleaf or Facelets. But QWEB is exactly designed for Odoo, it has access to the database and python side and context. Other templating engines are more general than QWEB and the can normally access to some kind of context passed in a JSON object only. 
The beauty of QWEB is that it is python integrated, there are not just variables but also you can have some python expressions and also it has customizable widgets. I'll write about widgets and using expressions to change the html dynamically.
Appologies me for talking too much, lets get back to the story, &lt;code&gt;t-esc&lt;/code&gt; or &lt;code&gt;t-field&lt;/code&gt;. The differences are quite a few, in text fields they are just the same but it is not going on like this with the others. The difference is in the interpreter of them and the widgets.&lt;code&gt;t-esc&lt;/code&gt; actually calls a &lt;code&gt;safe-eval&lt;/code&gt; most of other 't's do the same but &lt;code&gt;t-field&lt;/code&gt; can acept only a field name, or a chain of dot seperated related fields. Also, &lt;code&gt;t-field&lt;/code&gt; uses form widgets for rendering the selected field while &lt;code&gt;t-esc&lt;/code&gt; only returns a simple python output (we can change this and prettify the otherwise blunt &lt;code&gt;t-esc&lt;/code&gt;, I'll talk about it in the following parts). For example if you call t-esc on a related field i.e. &lt;code&gt;t-esc="someMany2Onefield"&lt;/code&gt; it will print the python &lt;code&gt;__str__&lt;/code&gt; of the class and a record number, just like what you will have if you in python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;someMany2Onefield&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;someMany2Onefield(12,)&lt;/code&gt;
but if you use &lt;code&gt;t-field&lt;/code&gt; it will display the &lt;code&gt;display_name&lt;/code&gt; field or the &lt;code&gt;name_get&lt;/code&gt;. The difference is &lt;code&gt;t-field&lt;/code&gt; uses form widget of the field as i said before. The same goes with the numerical fields, &lt;code&gt;t-field&lt;/code&gt; will use the &lt;code&gt;digits&lt;/code&gt; property of the field for decimal point and it will use thousend separator and other settings from the language settings of Odoo, while &lt;code&gt;t-esc&lt;/code&gt; simply print the number without formatting (although one can use python's &lt;code&gt;format&lt;/code&gt; function in &lt;code&gt;t-esc&lt;/code&gt;).
Other 't' tags also use safe_eval, &lt;code&gt;t-set&lt;/code&gt; in &lt;code&gt;t-value&lt;/code&gt; part, &lt;code&gt;t-if&lt;/code&gt;,  &lt;code&gt;t-foreach&lt;/code&gt;, &lt;code&gt;t-att&lt;/code&gt; and &lt;code&gt;t-attf&lt;/code&gt;, &lt;code&gt;t-raw&lt;/code&gt; and &lt;code&gt;t-log&lt;/code&gt;.&lt;/p&gt;
&lt;h4&gt;What can be used in safe_eval&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;qweb_context&lt;/code&gt; and of course safe python commands! It raises two questions, what are &lt;em&gt;safe&lt;/em&gt; python commands and what is in &lt;code&gt;qweb_context&lt;/code&gt;?&lt;/p&gt;</content><category term="QWEB"></category><category term="safe-eval"></category><category term="openerp"></category><category term="odoo"></category><category term="odoo reports"></category></entry><entry><title>QWEB demystification, Part 2 - qweb widgits</title><link href="https://pouyamn.github.io/posts/2016/01/16/qweb-2/" rel="alternate"></link><published>2016-01-16T11:26:00+03:30</published><updated>2016-01-16T11:26:00+03:30</updated><author><name>Pouya MN</name></author><id>tag:pouyamn.github.io,2016-01-16:/posts/2016/01/16/qweb-2/</id><summary type="html">&lt;p&gt;How to make new widgits in QWEB, example: display phone numbers properly in qweb reports.&lt;/p&gt;</summary><content type="html"></content><category term="QWEB"></category><category term="safe-eval"></category><category term="openerp"></category><category term="odoo"></category><category term="odoo reports"></category><category term="qweb widgits"></category></entry><entry><title>QWEB demystification, Part 3 - dynamic views in QWEB</title><link href="https://pouyamn.github.io/posts/2016/01/16/qweb-3/" rel="alternate"></link><published>2016-01-16T11:26:00+03:30</published><updated>2016-01-16T11:26:00+03:30</updated><author><name>Pouya MN</name></author><id>tag:pouyamn.github.io,2016-01-16:/posts/2016/01/16/qweb-3/</id><summary type="html"></summary><content type="html"></content><category term="QWEB"></category><category term="safe-eval"></category><category term="openerp"></category><category term="odoo"></category><category term="odoo reports"></category></entry></feed>